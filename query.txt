CREATE TABLE UTENTI (
    id INT NOT NULL AUTO_INCREMENT,
    username VARCHAR(50) NOT NULL UNIQUE,
    first_access DATETIME NOT NULL,
	PRIMARY KEY(id)
);

CREATE TABLE PROVINCE (
    sigla CHAR(2) NOT NULL,
    nome VARCHAR(100) NOT NULL,
    regione VARCHAR(100) NOT NULL,
    lat FLOAT NON NUlL,
    lon FLOAT NON NUlL,
    cap CHAR(2) NOT NULL,
	PRIMARY KEY(sigla)
);

CREATE TABLE ANNUNCI (
    id INT NOT NULL AUTO_INCREMENT,
    marca VARCHAR(50) NOT NULL,
    modello VARCHAR(50) NOT NULL,
    prezzo INT NOT NULL,
    link VARCHAR(200) NOT NULL UNIQUE,
    km INT NOT NULL,
    anno INT NOT NULL,
    provincia CHAR(2) NOT NULL,
    carburante VARCHAR(20) NOT NULL,
    cambio VARCHAR(20) NOT NULL,
    PRIMARY KEY(id),
    FOREIGN KEY (provincia) REFERENCES PROVINCE(sigla) ON UPDATE CASCADE ON DELETE CASCADE
);

CREATE TABLE SALVATI (
    id_utente INT NOT NULL,
    id_annuncio INT NOT NULL,
    PRIMARY KEY (id_utente, id_annuncio),
    FOREIGN KEY (id_utente) REFERENCES UTENTI(id) ON UPDATE CASCADE ON DELETE CASCADE,
    FOREIGN KEY (id_annuncio) REFERENCES ANNUNCI(id) ON UPDATE CASCADE ON DELETE CASCADE
);